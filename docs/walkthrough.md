# LiverSegNet Walkthrough: Resilient Hybrid Perception Pipeline
### Release: Gold Standard Hybrid Perception
em for laparoscopic anatomical segmentation. It integrates neural inference with deterministic geometric logic and heuristic color-based discovery (MAR).

## Inference Signal Classification

1. **Neural (Primary)**:
   - Neural signals are generated by DeepLabV3+ (Anatomy) and UNet-ResNet34 (Instruments).
   - Provides posterior probability maps for organ and tool localization.
2. **Deterministic (Guardrail)**:
   - Geometric filtering (Circular FOV mask), morphological mass unification, and instrument-based anatomical shielding.
   - Enforces physical constraints on neural predictions.
3. **Heuristic (Optional Recovery)**:
   - Physically-informed color recovery using BGR signatures for shadowed anatomical masses.
   - Designed to recover low-confidence regions where neural signals are attenuated.

## Hybrid Control Logic

The system supports a runtime kill-switch for heuristic layers. 

- **Heuristics ON**: Combined Neural-Heuristic signal for maximum anatomical recovery in low-light/shadowed conditions.
- **Heuristics OFF**: Pure Neural-Deterministic inference for maximum adherence to model-learned distributions.

## Comparative Evidence

Audit results for Video 01/Frame 99 demonstrate the variance between perception modes:

````carousel
![Neural-Only Inference](assets/audit_v2_2_1_neural_only.png)
Neural-only mode showing attenuated detection in shadowed regions (V3.0.0-HYBRID).
<!-- slide -->
![Hybrid-Enhanced Inference](assets/audit_v2_2_1_hybrid_enhanced.png)
Hybrid-enhanced mode showing complete anatomical mass recovery via heuristic expansion (V3.0.0-HYBRID).
````

## System Configuration Summary

- **Anatomy Model**: DeepLabV3+ (ResNet50 Backbone)
- **Tool Model**: UNet (ResNet34 Backbone)
- **Inference Kernel**: V3.0.0-HYBRID
- **Status**: Official Gold Release (v3.0.0-hybrid-gold)

## Clinical Hardening (V3.0.0)

The UI has been hardened to V3.0.0 standards to improve clinical transparency and hardware telemetry.

### 1. Hardened Surgical Gates
- **Critical Threshold**: Standardized to **20.5 px**.
- **Warning Threshold**: Standardized to **50.5 px**.
- Visualized via a high-contrast **Safety Vector Bar** in the Clinical Telemetry panel.

### 2. Enhanced Compute Audit
- **GPU Telemetry**: Real-time VRAM utilization and hardware identification.
- **Latency Monitoring**: Cycle latency (ms) tracking for real-time performance assurance.
- **System Resource Audit**: CPU and RAM utilization percentages displayed in the sidebar.

### 3. Perception Signal Clarity
- **Neural (Green)**, **Deterministic (Blue)**, and **Heuristic (Yellow)** signals are now visually distinct.
- **Improved Signal Indicators**: Replaced generic dots with class-specific icons for clinical clarity.

### 4. Corrected Heatmap Diagnostics
- Resolved normalization issues in the confidence maps.
- Adjusted blending alpha for better anatomical context.

## Final Project Organization & Handover (V3.0.0)

The repository has been consolidated for clinical production:
*   **Archival**: All research artifacts, debug logs, and experimental PNGs have been moved to `research/`.
*   **Documentation**: A definitive `README.md` and `docs/architecture.md` (including Mermaid system flow) have been authored.
*   **Weights**: The `production_v2_2_0/` directory remains the authoritative source for the hybrid-formalized models.

**System Status: FINALIZED & HANDED OVER.**
